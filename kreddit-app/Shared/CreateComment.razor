@using kreddit_app.Data;
@inject ApiService apiService
@inject NavigationManager navManager


<div>
    <br/>
    <h3>Tilf√∏j en kommentar</h3>
    <input placeholder="Content" type="input" id="content" @bind-value="content" />
    <button id="createPostButton" type="button" class="btn-submit" @onclick="CreateNewComment">Post comment</button>
    <br /><br />
    <button type="button" class="btn-submit" @onclick="GoBack">Tilbage til forsiden</button>
</div>

@code {
    [Parameter] public int PostId { get; set; }
    [Parameter] public EventCallback OnCommentCreated { get; set; }

    private string? content;

    private async Task CreateNewComment()
    {
        if (string.IsNullOrWhiteSpace(content)) return;

        await apiService.CreateComment(content, PostId, 1);
        content = "";
        await OnCommentCreated.InvokeAsync();
    }

    private void GoBack()
    {
        navManager.NavigateTo("/");
    }
}